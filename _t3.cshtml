@* enable the editing *@
@Edit.Enable(api: true, forms: true, context: true, autoToolbar: false)
@{
  string entityType = Content.EntityType;
}
<h1>3 - Semi-Public forms</h1>
<div>
  These are forms which are not allowed for public users, but for registered users or users in a certain group. <br>
  To test this, we must create a user-group and give only these the following permissions:
</div>
<ol>
  <li>read schema</li>
  <li>create (full-create, not draft)</li>
  <li>edit-draft only</li>
  <li>delete</li>
</ol>
<p></p>
<div>
  We won't run all tests, but we want to be sure that the system correctly handles users as not anonymous, <br>
  and that anonymous are not the same as users in a group. So we'll just want these tests:
</div>
<ol>
    <li>an anonymous user should not be able to edit</li>
    <li>an anonymous user should not be able to create</li>
    <li>a user in that group should be able to create - both draft and live</li>
    <li>a user in that group should only be able to edit into draft, not live</li>
    <li>a user in that group should be able to delete</li>
</ol>
<p></p>

<script>
    // simple function to run the command and handle the returned promise
    function addSimpleContent(tag) {
        $2sxc.cms.run(tag, "new", { contentType: "@Content.EntityType"})
            .then(function () {
                // alert("Thanks - we'll review your entry and publish it.")
            });
    }
</script>

<button onclick='window.addSimpleContent(this); return false;'>Add your  "@Content.EntityType"</button>
<p></p>

<h3>Item @Content.EntityType</h3>
@Edit.Toolbar(Content, actions: "new,edit,delete", contentType: "@Content.EntityType")
<div>
    <div>
        <label>Title</label>:
        <strong class="item-@Content.EntityTitle">@Content.EntityTitle</strong>
    </div>
</div>
<p></p>
<h3>List @Content.EntityType</h3>
<ol>
@foreach(var cont in AsDynamic(Data["Default"])){
    <li>
        <strong class="list-@Content.EntityTitle">@cont.EntityTitle</strong>
        @Edit.Toolbar(cont, actions: "edit,new,add,remove,delete", contentType: "@Content.EntityType")
    </li>
}
</ol>
