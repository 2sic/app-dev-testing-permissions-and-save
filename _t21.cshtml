@* enable the editing *@
@Edit.Enable(api: true, forms: true, context: true, autoToolbar: false)
@{
  string entityType = Content.EntityType;
}
<h1>2 - Public Form UI Tests</h1>
<div>
  These tests should verify that permissions prevent / allow saving correctly. So the setup must be:
</div>
<p></p>
<h2>2.1 - a content-type which doesn't have permissions set</h2>
<ul>
  <li>in this case an anonymous user who has the edit-button should get errors loading the schema already.</li>
</ul>
<p></p>
<script>
    // simple function to run the command and handle the returned promise
    function addSimpleContent(tag) {
        $2sxc.cms.run(tag, "new", { contentType: "@Content.EntityType"})
            .then(function () {
                // alert("Thanks - we'll review your entry and publish it.")
            });
    }
</script>

<button onclick='window.addSimpleContent(this); return false;'>Add your  "@Content.EntityType"</button>
<p></p>

<h3>Item @Content.EntityType</h3>
@Edit.Toolbar(Content, actions: "new,edit", contentType: "@Content.EntityType")
<div>
    <div>
        <label>Title</label>:
        <strong class="item-@Content.EntityTitle">@Content.EntityTitle</strong>
    </div>
</div>
<p></p>
<h3>List @Content.EntityType</h3>
<ol>
@foreach(var cont in AsDynamic(App.Data[entityType])){
    <li>
        <strong class="list-@Content.EntityTitle">@cont.EntityTitle</strong>
        @Edit.Toolbar(cont, actions: "edit,new,add,remove", contentType: "@Content.EntityType")
    </li>
}
</ol>
